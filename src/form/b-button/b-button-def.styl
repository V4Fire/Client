/*!
 * V4Fire Client Core
 * https://github.com/V4Fire/Client
 *
 * Released under the MIT license
 * https://github.com/V4Fire/Client/blob/master/LICENSE
 */

$p = {
	messageHelpers: true
	sizeHelpres: false
	defaultExterior: primary
}

b-button
	for $key, $val in getDSOptions(rounding)
		&_rounding_{$key} &__button
			border-radius unit($val, px)

	if getField($p, "mods.size")
		&_size
			for $key, $value in getField($p, "mods.size")
				&_{$key}
					& ^[0]
						&__value
							padding unit(getField($value, horOffset), px) unit(getField($value, vertOffset), px)

						&__button
							text-options(getField($value, textStyle))
							line-height 1

	getExteriorStyle($name, $prop)
		getField($p, "exterior." + $name + "." + $prop)

	generateExterior($k)
		$extBg = getExteriorStyle($k, backgroundColor)
		$extColor = getExteriorStyle($k, color)

		&__button
			if $extBg
				background $extBg

			if $extColor
				color $extColor

			for $key in (hover focus active disabled)
				if getField($p, "mods." + $key)
					&:{$key}
						path($value)
							"mods." + $key + "." + $value

						$color = getField($p, path(color))
						$bg = getField($p, path(backgroundColor))
						$blendMode = getField($p, path(blendMode))
						$opacity = getField($p, path(opacity))
						$boxShadow = getField($p, path(boxShadow))

						if $boxShadow
							box-shadow $boxShadow

						if $color
							color $color

						if $bg and $bg != none and $blendMode and $extBg and $extBg != none
							background blend($bg, $extBg, $blendMode)

						else if $bg
							background $bg

	if getField($p, "exterior")
		generateExterior($p.defaultExterior)

		for $key, $val in getField($p, exterior)
			&_exterior_{$key}
				& ^[0]
					generateExterior($key)

	@supports (-ms-accelerator true)
		&__button
			border-width 0.1em

	&__button
		transition color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out

	for $key in (post-icon pre-icon)
		$params = getField($p, "mods." + camelize($key))

		if $params
			&__{$key}
				margin-{$key == "pre-icon" ? right : left} unit(getField($params, offset), px)
