/*!
 * V4Fire Client Core
 * https://github.com/V4Fire/Client
 *
 * Released under the MIT license
 * https://github.com/V4Fire/Client/blob/master/LICENSE
 */

@import "super/i-block/i-block.styl"
@import "traits/i-visible/i-visible.styl"

$p = {
	rSize: 0.6em
	visibleHelpers: true
}

b-crop extends i-block
	// @stlint-disable
	i-visible({helpers: $p.visibleHelpers})
	// @stlint-enable

	position relative
	useGPU()
	user-select none

	&__over-wrapper
		display block

	&__area
		absolute top 0 left 0
		zIndex(modal)
		size 100%
		cursor crosshair

	&_disabled_true &__area
	&_progress_true &__area
	&_parent-progress_true &__area
		display none

	&_parent-progress_true &__over-wrapper
		background none

	&_progress_true &__progress
		display flex
		justify-content center
		align-items center

	&__progress
		absolute top 0 left 0
		zIndex(layer, 2)
		size 100%

	&__img
		max-width 100%

	&__clone
		position absolute
		zIndex(layer, 1)

		&_hidden_true
			display none

	&__select
		position absolute
		zIndex(layer, 2)

		box-sizing border-box
		cursor move

		&_hidden_true
			display none

	&_resize-select_false &__r
		visibility hidden

	&__r
		position absolute
		size $p.rSize width

		&_hor-align_left
			left -(@width / 2)

		&_hor-align_middle
			left 50%
			margin-left -(@width / 2)

		&_hor-align_right
			right -(@width / 2)

		&_vert-align_top
			top -(@width / 2)

		&_vert-align_middle
			top 50%
			margin-top -(@width / 2)

		&_vert-align_bottom
			bottom -(@width / 2)

		&_vert-align_top&_hor-align_left
			cursor nw-resize

		&_vert-align_top&_hor-align_right
			cursor ne-resize

		&_vert-align_bottom&_hor-align_left
			cursor sw-resize

		&_vert-align_bottom&_hor-align_right
			cursor se-resize

		&_vert-align_middle&_hor-align_left
			cursor w-resize

		&_vert-align_middle&_hor-align_right
			cursor e-resize

		&_vert-align_top&_hor-align_middle
			cursor n-resize

		&_vert-align_bottom&_hor-align_middle
			cursor s-resize
